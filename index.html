<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>GOD MODE PLAYER</title>

<style>
body{margin:0;background:#000;color:white;font-family:sans-serif;overflow:hidden}
#box{position:relative;height:56vw;background:black}
video{width:100%;height:100%;object-fit:contain}

/* HUD */
#hud{
position:absolute;top:10px;left:50%;
transform:translateX(-50%);
background:#000a;padding:6px 14px;
border-radius:20px;font-size:14px;
}

/* add image button */
#plus{
position:absolute;bottom:15px;right:15px;
width:55px;height:55px;border-radius:50%;
background:#00ffcc;color:black;
display:flex;align-items:center;justify-content:center;
font-size:32px;cursor:pointer;
}

/* progress */
#bar{height:6px;background:#222;cursor:pointer}
#prog{height:100%;width:0;background:#00ffcc}

/* thumbs */
#thumbs{
display:flex;gap:10px;overflow-x:auto;
padding:10px;background:#050505;
}
.thumb{
min-width:140px;height:80px;border-radius:10px;
overflow:hidden;border:2px solid transparent;cursor:pointer;
}
.thumb video{width:100%;height:100%;object-fit:cover}
.active{border:2px solid #00ffcc}

/* overlay */
.ovl{position:absolute;width:160px}
.ovl img{width:100%;pointer-events:none;border-radius:12px}
.resize{
position:absolute;right:0;bottom:0;
width:20px;height:20px;background:#00ffcc;
cursor:nwse-resize;
}
</style>
</head>
<body>

<div id="box">
<video id="v"></video>
<div id="hud">READY</div>
<div id="plus">+</div>
</div>

<div id="bar"><div id="prog"></div></div>

<div style="padding:10px">
<button onclick="pick.click()">LOAD VIDEOS</button>
<input type="file" id="pick" multiple accept="video/*" hidden>
<input type="file" id="imgpick" accept="image/*" multiple hidden>
</div>

<div id="thumbs"></div>

<script>
const v=document.getElementById("v");
const hud=document.getElementById("hud");
const thumbs=document.getElementById("thumbs");
let files=[],i=0;

/* load videos */
pick.onchange=e=>{
files=[...e.target.files];
thumbs.innerHTML="";
files.forEach((f,index)=>{
let url=URL.createObjectURL(f);
let d=document.createElement("div");
d.className="thumb";
let vid=document.createElement("video");
vid.src=url;vid.muted=true;vid.currentTime=1;
d.appendChild(vid);
d.onclick=()=>{i=index;play()};
thumbs.appendChild(d);
});
if(files.length){i=0;play()}
};

/* play */
function play(){
v.src=URL.createObjectURL(files[i]);
v.play();
highlight();
resume();
}

/* highlight */
function highlight(){
document.querySelectorAll(".thumb").forEach(t=>t.classList.remove("active"));
if(thumbs.children[i]) thumbs.children[i].classList.add("active");
}

/* progress */
v.ontimeupdate=()=>{
prog.style.width=(v.currentTime/v.duration*100)+"%";
localStorage.setItem(files[i].name,v.currentTime);
};

/* seek */
bar.onclick=e=>{
v.currentTime=(e.offsetX/bar.offsetWidth)*v.duration;
};

/* resume */
function resume(){
let t=localStorage.getItem(files[i].name);
if(t) v.currentTime=t;
}

/* auto next */
v.onended=()=>{i=(i+1)%files.length;play()};

/* keyboard */
document.onkeydown=e=>{
if(e.code=="Space")v.paused?v.play():v.pause();
if(e.key=="f")document.fullscreenElement?document.exitFullscreen():box.requestFullscreen();
if(e.key==">")v.playbackRate+=.25;
if(e.key=="<")v.playbackRate-=.25;
};

/* gestures */
let sx,sy;
box.ontouchstart=e=>{
sx=e.touches[0].clientX;
sy=e.touches[0].clientY;
};
box.ontouchmove=e=>{
let dx=e.touches[0].clientX-sx;
let dy=e.touches[0].clientY-sy;
if(Math.abs(dx)>50){v.currentTime+=dx>0?10:-10;sx=e.touches[0].clientX}
if(Math.abs(dy)>50){v.volume=Math.max(0,Math.min(1,v.volume-dy/300));sy=e.touches[0].clientY}
};

/* add overlays */
plus.onclick=()=>imgpick.click();

imgpick.onchange=e=>{
[...e.target.files].forEach(file=>{

let wrap=document.createElement("div");
wrap.className="ovl";
wrap.style.left="120px";
wrap.style.top="120px";

let img=document.createElement("img");
img.src=URL.createObjectURL(file);

/* delete btn */
let del=document.createElement("div");
del.innerHTML="Ã—";
del.style.position="absolute";
del.style.top="-10px";
del.style.right="-10px";
del.style.width="26px";
del.style.height="26px";
del.style.borderRadius="50%";
del.style.background="red";
del.style.color="white";
del.style.display="flex";
del.style.alignItems="center";
del.style.justifyContent="center";
del.style.cursor="pointer";
del.style.fontWeight="bold";
del.onclick=()=>wrap.remove();

/* resize */
let r=document.createElement("div");
r.className="resize";

wrap.append(img,r,del);
box.appendChild(wrap);

/* drag */
let dx,dy,d=false;
wrap.onpointerdown=e=>{
if(e.target===r||e.target===del)return;
d=true;
dx=e.clientX-wrap.offsetLeft;
dy=e.clientY-wrap.offsetTop;
};
window.onpointermove=e=>{
if(!d)return;
wrap.style.left=e.clientX-dx+"px";
wrap.style.top=e.clientY-dy+"px";
};
window.onpointerup=()=>d=false;

/* resize */
let rs=false,sx,sw;
r.onpointerdown=e=>{
rs=true;sx=e.clientX;sw=wrap.offsetWidth;e.stopPropagation()
};
window.addEventListener("pointermove",e=>{
if(!rs)return;
wrap.style.width=sw+(e.clientX-sx)+"px";
});
window.addEventListener("pointerup",()=>rs=false);

});
};
</script>
</body>
</html>
