<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GAA Player v1.5</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; padding: 0; }
        #v-area { width: 100vw; height: 56.25vw; background: #111; position: relative; border-bottom: 2px solid #00ffcc; }
        video { width: 100%; height: 100%; object-fit: contain; }
        
        /* Full Screen Overlay */
        .overlay {
            position: fixed; top: 100px; left: 20px;
            padding: 5px; background: rgba(255,255,255,0.1);
            border-radius: 8px; z-index: 999; touch-action: none;
        }
        .overlay img { width: 100px; display: block; border-radius: 4px; }
        .cls { position: absolute; top: -10px; right: -10px; background: red; color: #fff; border: none; border-radius: 50%; width: 25px; height: 25px; font-weight: bold; }
        .sz-bar { width: 100%; margin-top: 5px; }

        .controls { padding: 15px; display: grid; gap: 10px; }
        .btn { background: #00ffcc; color: #000; border: none; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1rem; width: 100%; }
        input[type="range"] { width: 100%; }
        label { color: #00ffcc; font-size: 14px; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div id="v-area">
        <video id="vid" playsinline controls></video>
    </div>

    <div id="ovl-container"></div>

    <div class="controls">
        <label>Brightness (Software Boost)</label>
        <input type="range" id="br" min="1" max="5" step="0.1" value="1">
        
        <div style="display: flex; gap: 10px;">
            <button class="btn" onclick="document.getElementById('vi').click()">üìÅ Select Videos</button>
            <button class="btn" onclick="document.getElementById('ii').click()">üñºÔ∏è Add Images</button>
        </div>
        
        <input type="file" id="vi" accept="video/*" multiple style="display:none">
        <input type="file" id="ii" accept="image/*" multiple style="display:none">
        
        <button class="btn" id="nxt" style="background:#ffcc00">Next Video ‚è≠Ô∏è</button>
    </div>

    <script>
        const v = document.getElementById('vid');
        const c = document.getElementById('ovl-container');
        let vlist = [];
        let cur = 0;

        // --- Video Logic ---
        document.getElementById('vi').onchange = (e) => {
            vlist = Array.from(e.target.files);
            if(vlist.length > 0) { cur = 0; loadV(0); }
        };

        function loadV(idx) {
            const reader = new FileReader();
            reader.onload = (ev) => {
                v.src = ev.target.result;
                v.play().catch(e => console.log("Auto-play blocked"));
            };
            reader.readAsDataURL(vlist[idx]); // Offline friendly method
        }

        document.getElementById('nxt').onclick = () => {
            if(vlist.length > 0) {
                cur = (cur + 1) % vlist.length;
                loadV(cur);
            }
        };

        // --- Brightness ---
        document.getElementById('br').oninput = (e) => {
            v.style.filter = `brightness(${e.target.value})`;
        };

        // --- Image Overlay & Resize ---
        document.getElementById('ii').onchange = (e) => {
            Array.from(e.target.files).forEach(f => {
                const r = new FileReader();
                r.onload = (ev) => {
                    const w = document.createElement('div');
                    w.className = 'overlay';
                    
                    const i = document.createElement('img');
                    i.src = ev.target.result;
                    
                    const b = document.createElement('button');
                    b.innerHTML = "√ó"; b.className = "cls";
                    b.onclick = () => w.remove();

                    const s = document.createElement('input');
                    s.type = "range"; s.className = "sz-bar";
                    s.min = "50"; s.max = "500"; s.value = "100";
                    s.oninput = (sr) => { i.style.width = sr.target.value + "px"; };

                    w.append(b, i, s);
                    c.appendChild(w);
                    move(w);
                };
                r.readAsDataURL(f);
            });
        };

        // --- Mobile Touch Drag ---
        function move(el) {
            let x = 0, y = 0;
            el.addEventListener("touchstart", (e) => {
                if (e.target.type === "range") return;
                const t = e.touches[0];
                x = t.clientX - el.offsetLeft;
                y = t.clientY - el.offsetTop;
            });
            el.addEventListener("touchmove", (e) => {
                if (e.target.type === "range") return;
                e.preventDefault();
                const t = e.touches[0];
                el.style.left = (t.clientX - x) + "px";
                el.style.top = (t.clientY - y) + "px";
            }, {passive: false});
        }
    </script>
</body>
</html>
