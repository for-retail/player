<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>GOD MODE PLAYER</title>

<style>
body{margin:0;background:#000;color:white;font-family:sans-serif;overflow:hidden}
#box{position:relative;height:56vw;background:black}
video{width:100%;height:100%;object-fit:contain}

#hud{
position:absolute;top:10px;left:50%;
transform:translateX(-50%);
background:#000a;padding:6px 14px;
border-radius:20px;font-size:14px;
}

#plus{
position:absolute;bottom:15px;right:15px;
width:55px;height:55px;border-radius:50%;
background:#00ffcc;color:black;
display:flex;align-items:center;justify-content:center;
font-size:32px;cursor:pointer;
z-index:10;
}

#bar{height:6px;background:#222;cursor:pointer}
#prog{height:100%;width:0;background:#00ffcc}

#thumbs{
display:flex;gap:10px;overflow-x:auto;
padding:10px;background:#050505;
}
.thumb{
min-width:140px;height:80px;border-radius:10px;
overflow:hidden;border:2px solid transparent;cursor:pointer;
}
.thumb video{width:100%;height:100%;object-fit:cover}
.active{border:2px solid #00ffcc}

/* overlay */
.ovl{
position:absolute;
width:160px;
touch-action:none;
}
.ovl img{
width:100%;
display:block;
pointer-events:none;
border-radius:12px;
}

.del{
position:absolute;
top:-10px;
right:-10px;
width:26px;height:26px;
border-radius:50%;
background:red;
display:flex;
align-items:center;
justify-content:center;
font-weight:bold;
cursor:pointer;
}

.resize{
position:absolute;
right:0;bottom:0;
width:22px;height:22px;
background:#00ffcc;
cursor:nwse-resize;
}
</style>
</head>
<body>

<div id="box">
<video id="v"></video>
<div id="hud">READY</div>
<div id="plus">+</div>
</div>

<div id="bar"><div id="prog"></div></div>

<div style="padding:10px">
<button onclick="pick.click()">LOAD VIDEOS</button>
<input type="file" id="pick" multiple accept="video/*" hidden>
<input type="file" id="imgpick" accept="image/*" multiple hidden>
</div>

<div id="thumbs"></div>

<script>
const v=document.getElementById("v");
const thumbs=document.getElementById("thumbs");
const box=document.getElementById("box");

let files=[],i=0;

/* load videos */
pick.onchange=e=>{
files=[...e.target.files];
thumbs.innerHTML="";
files.forEach((f,index)=>{
let url=URL.createObjectURL(f);
let d=document.createElement("div");
d.className="thumb";
let vid=document.createElement("video");
vid.src=url;vid.muted=true;vid.currentTime=1;
d.appendChild(vid);
d.onclick=()=>{i=index;play()};
thumbs.appendChild(d);
});
if(files.length){i=0;play()}
};

function play(){
v.src=URL.createObjectURL(files[i]);
v.play();
highlight();
}

function highlight(){
document.querySelectorAll(".thumb").forEach(t=>t.classList.remove("active"));
if(thumbs.children[i]) thumbs.children[i].classList.add("active");
}

/* progress */
v.ontimeupdate=()=>{
prog.style.width=(v.currentTime/v.duration*100)+"%";
};

bar.onclick=e=>{
v.currentTime=(e.offsetX/bar.offsetWidth)*v.duration;
};

v.onended=()=>{i=(i+1)%files.length;play()};

/* overlay button */
plus.onclick=()=>imgpick.click();

/* overlay system */
imgpick.onchange=e=>{
[...e.target.files].forEach(file=>{

const wrap=document.createElement("div");
wrap.className="ovl";
wrap.style.left="100px";
wrap.style.top="100px";

const img=document.createElement("img");
img.src=URL.createObjectURL(file);

const del=document.createElement("div");
del.className="del";
del.innerHTML="Ã—";
del.onclick=()=>wrap.remove();

const res=document.createElement("div");
res.className="resize";

wrap.append(img,del,res);
box.appendChild(wrap);

/* drag */
let dragging=false,offX=0,offY=0;

wrap.addEventListener("pointerdown",e=>{
if(e.target===res || e.target===del) return;
dragging=true;
offX=e.clientX-wrap.offsetLeft;
offY=e.clientY-wrap.offsetTop;
wrap.setPointerCapture(e.pointerId);
});

wrap.addEventListener("pointermove",e=>{
if(!dragging) return;
wrap.style.left=(e.clientX-offX)+"px";
wrap.style.top=(e.clientY-offY)+"px";
});

wrap.addEventListener("pointerup",()=>dragging=false);
wrap.addEventListener("pointercancel",()=>dragging=false);

/* resize */
let resizing=false,startX,startW;

res.addEventListener("pointerdown",e=>{
resizing=true;
startX=e.clientX;
startW=wrap.offsetWidth;
e.stopPropagation();
});

window.addEventListener("pointermove",e=>{
if(!resizing) return;
wrap.style.width=startW+(e.clientX-startX)+"px";
});

window.addEventListener("pointerup",()=>resizing=false);

});
};
</script>
</body>
</html>
